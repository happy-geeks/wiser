@model List<HistoryVersionModel>
@using GeeksCoreLibrary.Core.Cms.Attributes
@using System.Reflection
@using Api.Modules.Templates.Models.History

<div class="row historyHeader">
    <div class="col col-6">
        <h3>Oud</h3>
    </div>
    <div class="col col-6">
        <h3>Nieuw</h3>
    </div>
</div>

<div class="col col-12 historyTagline" id="revertChanges">
    <button role="button" class="k-button" title="View HTML" aria-label="View HTML">
        <span class="k-icon k-i-undo"></span>
        <span class="k-button-text">Ongedaan maken</span>
    </button>
</div>
@foreach (var historyVersion in @Model)
{
    <div class="row historyLine" data-historyversion="@historyVersion.GetVersion()">
        <div class="col col-12 historyTagline">
            <span><span class="k-icon k-i-edit"></span> Versie @historyVersion.GetVersion() |</span>
            <span><span class="k-icon k-i-calendar"></span> @historyVersion.GetDisplayChangedOn() |</span>
            <span><span class="k-icon k-i-user"></span> door @historyVersion.GetChangedBy()</span>
        </div>
        @if (@historyVersion.GetChanges() != null)
        {
            @foreach (DynamicContentChangeModel historyChange in @historyVersion.GetChanges())
            {
                var propertyAttribute = historyChange.GetPropertyAttribute();

                <partial name="HistoryInputGenerator" model="new KeyValuePair<CmsPropertyAttribute, KeyValuePair<PropertyInfo, object>>(propertyAttribute, new KeyValuePair<PropertyInfo, object>(@historyChange.GetPropertyInfo(), historyChange.GetOldValue()))" />
                <partial name="HistoryInputGenerator" model="new KeyValuePair<CmsPropertyAttribute, KeyValuePair<PropertyInfo, object>>(propertyAttribute, new KeyValuePair<PropertyInfo, object>(@historyChange.GetPropertyInfo(), historyChange.GetNewValue()))" />
            }
        }
    </div>
}