@using Microsoft.AspNetCore.Mvc.Localization
@inject IViewLocalizer Localizer
@model FrontEnd.Modules.Base.Models.BaseModuleViewModel
@inject FrontEnd.Core.Interfaces.IWebPackService WebPackService

@{
    ViewBag.Title = "VCS";
    Layout = "";
    //_Layout
}

<!DOCTYPE html>
<html>
<head runat="server">
    <meta charset="utf-8" />
    <title>@Localizer["Wiser 3 - Versiebeheermodule"]</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="//kendo.cdn.telerik.com/2022.2.621/styles/kendo.common-material.min.css" rel="stylesheet" />
    <link href="//kendo.cdn.telerik.com/2022.2.621/styles/kendo.material.min.css" rel="stylesheet" />
    <script>
        window.wiserVersion = "@Model.WiserVersion?.ToString()";
    </script>
    <style>
        #wiser,
        #NotMainBranchNotification {
            display: none;
        }
    </style>
</head>
<body class="@Model.BodyCssClass"
      data-wiser-api-authentication-url="@Model.ApiAuthenticationUrl"
      data-wiser-api-root="@Model.ApiRoot"
      data-is-test-environment="@Model.IsTestEnvironment.ToString().ToLowerInvariant()"
      data-sub-domain="@Model.SubDomain"
      data-track-js-token="@Model.Settings.TrackJsToken"
      data-api-client-id="@Model.Settings.ApiClientId"
      data-api-client-secret="@Model.Settings.ApiClientSecret">
    <div id="NotMainBranchNotification" class="hidden">
        <p>
            @Localizer["You are currently logged in to a branch of this customer. It is not possible/allowed to use the template module in an industry.<br/> Please log into the customer's live environment and work in the template module there."]
        </p>
    </div>
    <div id="wiser">
        <div id="tabstrip" class="tabstrip k-tabstrip-wrapper">
            <ul>
                <li id="changeHistoryTab" class="k-state-active">@Localizer["Open changes"]</li>
                <li id="deployTab">@Localizer["Deploy"]</li>
                <li id="historyTab">@Localizer["History"]</li>
            </ul>
            <div id="templateChangeHistory">
                <form class="formData">
                    <div id="commitData">
                        <select id="commitEnvironment"></select>
                        <label for="commitDescription">@Localizer["Description"]</label>
                        <textarea type="text" id="commitDescription"></textarea>                            
                    </div>
                    <div id="gridsContainer">
                        <h2>Templates</h2>
                        <div id="templateChangesGrid"></div>
                        <h2>@Localizer["Dynamic Content"]</h2>
                        <div id="dynamicContentChangesGrid"></div>
                    </div>
                    <button id="commitButton">@Localizer["Commit"]</button>
                </form>
            </div>
            <div id="deploy">
                <div class="formData">
                    <div class="gridData">
                        <div id="deployGrid"></div>
                    </div>
                </div>
                <button class="environment-deploy" id="deployCommitToLive">@Localizer["Deploy to live"]</button>
                <button class="environment-deploy" id="deployCommitToAcceptance">@Localizer["Deploy to acceptance"]</button>
                <button class="environment-deploy" id="deployCommitToTest">@Localizer["Deploy to test"]</button>
                <div class="branch-container hidden" id="deployToBranchContainer">
                    <select id="branchesDropDown"></select>
                    <button class="branch-deploy" id="deployCommitToBranch">@Localizer["Deploy to selected branch"]</button>
                </div>
            </div>
            <div id="history">@Localizer["Work in progress"]</div>
        </div>
    </div>

     <div id="mainLoader" class="fullscreen-loader loading"> 
         <div class="loader-icon"> 
             <div></div> 
             <div></div> 
             <div></div> 
             <div></div> 
         </div> 
    </div>

    <script src="@await WebPackService.GetManifestFileAsync("Utils.js")"></script>
    <script src="@await WebPackService.GetManifestFileAsync("Base.js")"></script>
    <script src="@await WebPackService.GetManifestFileAsync("VersionControl.js")"></script>
</body>
</html>
