@using FrontEnd.Core.Models

@model BaseViewModel
<style>
    [v-cloak] {
        display: none;
    }
</style>
<!-- Current Wiser version: @Model.WiserVersion?.ToString() -->
<div id="app" v-cloak>
    <div :class="{ 'loading': mainLoader }">
        <header v-if="user.loggedIn && !requirePasswordChange">
            <ul class="main-menu">
                <li id="side-menu">
                    <div id="menu-btn" @@click="toggleMenuState()"><ins class="icon-menu"></ins><span>Menu</span></div>
                    <div id="side-btn" @@click="toggleMenuActive()"><ins class="icon-chevron-right"></ins></div>

                    <nav id="side-nav">
                        <div class="menu-scroller">
                            <ul>
                                <li v-for="moduleGroup in moduleGroups" :key="moduleGroup.name">
                                    <strong v-if="moduleGroup.name">{{ moduleGroup.name }}</strong>
                                    <ul>
                                        <li v-for="module in moduleGroup.modules" :key="module.moduleId">
                                            <a href="#" :title="module.name" @@click="onOpenModuleClick($event, module)"><ins :class="module.icon"></ins><span>{{ module.name }}</span></a>
                                            <button @@click="onTogglePin($event, module.moduleId)" :class="{ pinned: module.pinned, 'auto-load': module.autoLoad }">
                                                <ins :class="{ 'icon-line-pin-empty': !module.autoLoad, 'icon-line-pin-full': module.pinned && module.autoLoad }"></ins>
                                            </button>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </nav>
                </li>

                <li class="tabs">
                    <div v-for="module in openedModules" :key="module.id" :class="{ 'tab-item': true, active: module.id === activeModule }" @@click="setActiveModule($event, module.id)" :title="module.name">
                        <ins :class="module.icon"></ins>
                        <strong>{{ module.name }}</strong>
                        <span class="close-module" title="module sluiten" @@click="closeModule(module)"></span>
                    </div>
                </li>

                <li class="icons">
                    <div class="ico-item" v-if="modules.find(m => m.moduleId === 709)">
                        <ins class="icon-line-search" @@click="openModule(709)"></ins>
                    </div>
                    <task-alerts ref="taskAlerts"></task-alerts>
                </li>

                <li class="login">
                    <span>
                        <strong class="title">Welkom</strong>
                        <span class="sub-title">{{ user.name }}</span>
                        <ins class="icon-chevron-down"></ins>
                    </span>

                <ul class="sub-menu">
                    <li><a href="#" v-if="user.adminAccountId" @@click="openCustomerManagement()"><ins class="icon-line-user-plus"></ins><span>Klant toevoegen</span></a></li>
                    <li><a href="#" @@click="openMarkerIoScreen()"><ins class="icon-line-bug"></ins><span>Bug melden! (CTRL+B)</span></a></li>
                    <li><a href="#" @@click="openWiserIdPrompt"><ins class="icon-line-database-search"></ins><span>Wiser item openen (CTRL+O)</span></a></li>
                    <li><a href="#" @@click="openChangePasswordPrompt"><ins class="icon-line-lock"></ins><span>Wachtwoord wijzigen</span></a></li>
                    <li><a href="#" @@click="openWiserBranchesPrompt"><ins class="icon-table-backup"></ins><span>Wiser branches</span></a></li>
                    <li><a href="#" @@click="logout()"><ins class="icon-line-log-out"></ins><span>Uitloggen</span></a></li>
                </ul>
            </li>
            <li class="logo">
                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 266" style="enable-background:new 0 0 512 266;" xml:space="preserve">
                <circle class="logo1" cx="183.1" cy="97.1" r="24.3" />
                <circle class="logo1" cx="328.9" cy="97.1" r="24.3" />
                <path class="logo1" d="M256,179.6c-9.6,10.8-21.5,19.5-35,25.2l35,60.8l35-60.8C277.5,199.1,265.6,190.4,256,179.6z" />
                <path class="logo2" d="M352.1,54.5c15.1,8.3,25.3,24.3,25.3,42.7c0,26.8-21.8,48.6-48.6,48.6c-26.8,0-48.6-21.7-48.6-48.4 c0-26.8,21.8-48.3,48.6-48.3L511,1H328.9c-29,0-55.1,12.6-72.9,32.6C238.2,13.6,212.2,1,183.1,1H1l182.1,48.1 c26.8,0,48.6,21.5,48.6,48.3c0,26.8-21.8,48.4-48.6,48.4c-26.8,0-48.6-21.9-48.6-48.6c0-18.4,10.2-34.4,25.3-42.7l-55.1-14.7 C93,55.9,86,75.7,86,97.1c0,53.7,43.5,97.1,97.1,97.1c29,0,55.1-12.6,72.9-32.6c17.8,20,43.8,32.6,72.9,32.6 c53.7,0,97.1-43.5,97.1-97.1c0-21.4-7-41.3-18.7-57.3L352.1,54.5z" />
                </svg>
            </li>
        </ul>
        </header>

        <main :class="{ login: !user.loggedIn || requirePasswordChange }">
            <p v-if="user.loggedIn && !mainLoader && !hasModules">Voor deze gebruiker zijn geen modules beschikbaar.</p>
            <login v-bind:sub-domain="appSettings.subDomain" v-if="!user.loggedIn || requirePasswordChange" ref="login"></login>
            <section class="iframe-container">
                <iframe v-for="module in openedModulesWithBackend" :key="module.id" :src="module.iframeUrl || `/Modules/${module.type}${module.fileName}${module.queryString}`" :class="{ active: module.id === activeModule }" frameborder="0" scrolling="auto"></iframe>
                <iframe v-for="module in openedWiser1Modules" :key="module.id" :src="`${appSettings.wiser1BaseUrl}?singleModuleId=${module.moduleId}&autoLoginCookie=${encodeURIComponent(user.cookieValue)}&autoLoginUserId=${encodeURIComponent(user.encryptedId)}`" :class="{ active: module.id === activeModule }" frameborder="0" scrolling="auto"></iframe>
            </section>

            <keep-alive>
                <customer-management v-if="user.adminAccountId && activeModule === 'customerManagement'" v-bind:sub-domain="appSettings.subDomain" ref="customerManagement"></customer-management>
            </keep-alive>
        </main>

        <wiser-dialog :modal="true" :width="'400px'" :title="'Vul een ID in'" ref="wiserIdPrompt" :visible="false" :actions="[{ text: 'Annuleren' }, { text: 'Openen', primary: true, action: openWiserItem }]" @@open="onWiserIdPromptOpen">
            <div class="form-row">
                <input type="number" id="wiserId" autocomplete="off" autofocus="autofocus" autocapitalize="none" v-model="wiserIdPromptValue" min="1" step="1" @@keypress="onWiserIdFieldKeyPress" required>
            </div>
        </wiser-dialog>
        <wiser-dialog :modal="true" :width="'400px'" :title="'Entiteit'" ref="wiserEntityTypePrompt" :visible="false" :actions="[{ text: 'Annuleren' }, { text: 'Openen', primary: true, action: openWiserItem }]">
            <p>Het opgegeven ID komt meerdere keren voor. Kies welk type u wilt openen:</p>
            <div class="form-row">
                <dropdownlist :data-items="listOfEntityTypes" :text-field="'display_name'" :data-item-key="'id'" v-model="wiserEntityTypePromptValue"></dropdownlist>
            </div>
        </wiser-dialog>
        <wiser-dialog :modal="true" :width="'400px'" :title="'Wachtwoord wijzigen'" ref="changePasswordPrompt" :visible="false" :actions="[{ text: 'Annuleren' }, { text: 'Opslaan', primary: true, action: changePassword }]">
            <div class="form-row">
                <input type="password" id="oldPassword" name="oldPassword" class="loginField passwordField" placeholder="Uw huidig wachtwoord" v-model="changePasswordPromptOldPasswordValue" />
            </div>
            <div class="form-row">
                <input type="password" id="newPassword" name="newPassword" class="loginField passwordField" placeholder="Uw nieuwe wachtwoord" v-model="changePasswordPromptNewPasswordValue" />
            </div>
            <div class="form-row">
                <input type="password" id="newPasswordRepeat" name="newPasswordRepeat" class="loginField passwordField" placeholder="Nogmaals uw nieuwe wachtwoord" v-model="changePasswordPromptNewPasswordRepeatValue" />
            </div>

            <div class="error" v-if="changePasswordError">{{ changePasswordError }}</div>
        </wiser-dialog>
        <wiser-dialog class="branches-dialog" :modal="true" :width="'1200px'" :title="'Wiser branches'" ref="wiserBranchesPrompt" :visible="false" :actions="[]">
            <div class="container">
                <div class="row equal">
                    <div class="col col-6">
                        <p class="left half">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis nisl augue, consectetur eget tempus ut, rhoncus a dolor. 
                            Cras erat libero, iaculis vitae mauris et, molestie laoreet magna. Sed at quam quis enim ullamcorper fringilla. Morbi rhoncus nulla nulla, 
                            et viverra ligula venenatis eget. Cras blandit sagittis nibh lacinia gravida. Sed pretium nisi vel felis imperdiet elementum. Curabitur 
                            posuere leo nec tortor eleifend scelerisque. Fusce ac dictum erat, nec convallis risus. Integer purus felis, consectetur at mauris vitae, 
                            efficitur mattis sem. Pellentesque quis pulvinar neque. Aliquam condimentum non nulla non tristique. Maecenas nisl mauris, volutpat vitae 
                            leo sed, malesuada tempor ipsum. Aliquam quis eros nec diam ultrices molestie. Vestibulum ante ipsum primis in faucibus orci luctus et 
                            ultrices posuere cubilia curae; Etiam nec purus dui.</p>

                            <button class="btn btn-primary" @@click="openCreateBranchPrompt">Nieuwe branch maken</button>
                    </div>
                    <div class="col col-6">
                        <p class="right half">Integer in sollicitudin dolor. Mauris sed massa ex. Integer justo quam, bibendum quis neque id, auctor ornare tellus. 
                            Sed vitae nisi condimentum, tincidunt ligula ac, sagittis ipsum. Pellentesque arcu metus, ullamcorper in congue vel, convallis facilisis nunc. 
                            Aliquam elementum est mauris, non vulputate odio ornare in. Cras libero lacus, pharetra id est nec, convallis laoreet tortor. Quisque sodales 
                            nunc feugiat, tempor nisi non, interdum quam. Quisque ut urna ipsum. Donec et elit fermentum, commodo odio a, vulputate odio. Etiam vitae massa 
                            at diam convallis tincidunt sit amet sit amet est. Curabitur id dui ut est eleifend accumsan vitae faucibus sapien. Phasellus imperdiet facilisis 
                            elit sit amet mattis.</p>

                            <button class="btn btn-primary" @@click="openMergeBranchPrompt">Bestaande branch mergen</button>
                    </div>
                </div>
            </div>
        </wiser-dialog>
        <wiser-dialog class="branches-dialog" :modal="true" :width="'1200px'" :title="'Branch maken'" ref="wiserCreateBranchPrompt" :visible="false" :actions="[]">
            <div class="container stretch">
                <div class="row no-scroll">
                    <div class="col col-12 form-row">
                        <label for="branche-name">Geef een naam op voor de nieuwe branche</label>
                        <section class="full-error" v-if="createBranchError">
                            <ins class="icon-line-alert"></ins>
                            <span v-html="createBranchError"></span>
                        </section>
                        <input type="text" id="newBranchName" autocomplete="off" autofocus="autofocus" autocapitalize="none" v-model="createBranchPromptValue" required>
                    </div>
                    <div class="col col-12 form-row no-bottom-margin">
                        <label for="branche-data">Welke data wil je naar de branche overzetten?
                            <span class="label-info">Let op: bij items worden ook altijd <strong>alle</strong> gekoppelde items meegenomen!</span>
                        </label>
                    </div>
                    <div class="col col-12 table-row no-top-margin">
                        <div class="fixed-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Item</th>
                                        <th>Aantal</th>
                                        <th>Wat</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Alle onderstaande</td>
                                        <td>100000</td>
                                        <td>
                                            <select>
                                                <option selected>Alles</option>
                                                <option>Random X items</option>
                                                <option>Laatste X items</option>
                                                <option>Alles wat toegevoegd is voor X</option>
                                                <option>Alles wat toegevoegd is na X</option>
                                                <option>Alles wat toegevoegd is tussen X en Y</option>
                                            </select>
                                        </td>
                                        <td class="extra"></td>
                                    </tr>
                                    <tr>
                                        <td>Adres</td>
                                        <td>100000</td>
                                        <td>
                                            <select>
                                                <option>Alles</option>
                                                <option>Random X items</option>
                                                <option selected>Laatste X items</option>
                                                <option>Alles wat toegevoegd is voor X</option>
                                                <option>Alles wat toegevoegd is na X</option>
                                                <option>Alles wat toegevoegd is tussen X en Y</option>
                                            </select>
                                        </td>
                                        <td class="extra">
                                            <label>
                                                <span>Aantal items:</span>
                                                <input type="number" value="" class="error" />
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Basket</td>
                                        <td>100000</td>
                                        <td>
                                            <select>
                                                <option>Alles</option>
                                                <option>Random X items</option>
                                                <option selected>Laatste X items</option>
                                                <option>Alles wat toegevoegd is voor X</option>
                                                <option>Alles wat toegevoegd is na X</option>
                                                <option>Alles wat toegevoegd is tussen X en Y</option>
                                            </select>
                                        </td>
                                        <td class="extra">
                                            <label>
                                                <span>Aantal items:</span>
                                                <input type="number" value="1000" class="" />
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Basketline</td>
                                        <td>100000</td>
                                        <td>
                                            <select>
                                                <option>Alles</option>
                                                <option>Random X items</option>
                                                <option>Laatste X items</option>
                                                <option selected>Alles wat toegevoegd is voor X</option>
                                                <option>Alles wat toegevoegd is na X</option>
                                                <option>Alles wat toegevoegd is tussen X en Y</option>
                                            </select>
                                        </td>
                                        <td class="extra">
                                            <label>
                                                <span>Datum:</span>
                                                <input type="date" value="" class="" />
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Factuur</td>
                                        <td>100000</td>
                                        <td>
                                            <select>
                                                <option selected>Alles</option>
                                                <option>Random X items</option>
                                                <option>Laatste X items</option>
                                                <option>Alles wat toegevoegd is voor X</option>
                                                <option>Alles wat toegevoegd is na X</option>
                                                <option>Alles wat toegevoegd is tussen X en Y</option>
                                            </select>
                                        </td>
                                        <td class="extra"></td>
                                    </tr>
                                    <tr>
                                        <td>Klant</td>
                                        <td>100000</td>
                                        <td>
                                            <select>
                                                <option selected>Alles</option>
                                                <option>Random X items</option>
                                                <option>Laatste X items</option>
                                                <option>Alles wat toegevoegd is voor X</option>
                                                <option>Alles wat toegevoegd is na X</option>
                                                <option>Alles wat toegevoegd is tussen X en Y</option>
                                            </select>
                                        </td>
                                        <td class="extra"></td>
                                    </tr>
                                    <tr>
                                        <td>Order</td>
                                        <td>100000</td>
                                        <td>
                                            <select>
                                                <option selected>Alles</option>
                                                <option>Random X items</option>
                                                <option>Laatste X items</option>
                                                <option>Alles wat toegevoegd is voor X</option>
                                                <option>Alles wat toegevoegd is na X</option>
                                                <option>Alles wat toegevoegd is tussen X en Y</option>
                                            </select>
                                        </td>
                                        <td class="extra"></td>
                                    </tr>
                                    <tr>
                                        <td>Orderregel</td>
                                        <td>100000</td>
                                        <td>
                                            <select>
                                                <option selected>Alles</option>
                                                <option>Random X items</option>
                                                <option>Laatste X items</option>
                                                <option>Alles wat toegevoegd is voor X</option>
                                                <option>Alles wat toegevoegd is na X</option>
                                                <option>Alles wat toegevoegd is tussen X en Y</option>
                                            </select>
                                        </td>
                                        <td class="extra"></td>
                                    </tr>
                                    <tr>
                                        <td>Product</td>
                                        <td>100000</td>
                                        <td>
                                            <select>
                                                <option selected>Alles</option>
                                                <option>Random X items</option>
                                                <option>Laatste X items</option>
                                                <option>Alles wat toegevoegd is voor X</option>
                                                <option>Alles wat toegevoegd is na X</option>
                                                <option selected>Alles wat toegevoegd is tussen X en Y</option>
                                            </select>
                                        </td>
                                        <td class="extra">
                                            <div>
                                                <input type="date" value="" class="" />
                                                <input type="date" value="" class="" />
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Productfilter</td>
                                        <td>100000</td>
                                        <td>
                                            <select>
                                                <option selected>Alles</option>
                                                <option>Random X items</option>
                                                <option>Laatste X items</option>
                                                <option>Alles wat toegevoegd is voor X</option>
                                                <option>Alles wat toegevoegd is na X</option>
                                                <option>Alles wat toegevoegd is tussen X en Y</option>
                                            </select>
                                        </td>
                                        <td class="extra"></td>
                                    </tr>
                                    <tr>
                                        <td>Q</td>
                                        <td>100000</td>
                                        <td>
                                            <select>
                                                <option selected>Alles</option>
                                                <option>Random X items</option>
                                                <option>Laatste X items</option>
                                                <option>Alles wat toegevoegd is voor X</option>
                                                <option>Alles wat toegevoegd is na X</option>
                                                <option>Alles wat toegevoegd is tussen X en Y</option>
                                            </select>
                                        </td>
                                        <td class="extra"></td>
                                    </tr>
                                    <tr>
                                        <td>R</td>
                                        <td>100000</td>
                                        <td>
                                            <select>
                                                <option selected>Alles</option>
                                                <option>Random X items</option>
                                                <option>Laatste X items</option>
                                                <option>Alles wat toegevoegd is voor X</option>
                                                <option>Alles wat toegevoegd is na X</option>
                                                <option>Alles wat toegevoegd is tussen X en Y</option>
                                            </select>
                                        </td>
                                        <td class="extra"></td>
                                    </tr>
                                    <tr>
                                        <td>S</td>
                                        <td>100000</td>
                                        <td>
                                            <select>
                                                <option selected>Alles</option>
                                                <option>Random X items</option>
                                                <option>Laatste X items</option>
                                                <option>Alles wat toegevoegd is voor X</option>
                                                <option>Alles wat toegevoegd is na X</option>
                                                <option>Alles wat toegevoegd is tussen X en Y</option>
                                            </select>
                                        </td>
                                        <td class="extra"></td>
                                    </tr>
                                    <tr>
                                        <td>T</td>
                                        <td>100000</td>
                                        <td>
                                            <select>
                                                <option selected>Alles</option>
                                                <option>Random X items</option>
                                                <option>Laatste X items</option>
                                                <option>Alles wat toegevoegd is voor X</option>
                                                <option>Alles wat toegevoegd is na X</option>
                                                <option>Alles wat toegevoegd is tussen X en Y</option>
                                            </select>
                                        </td>
                                        <td class="extra"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <footer class="row fixed no-bottom-padding">
                    <div class="col col-8 inline">
                        <label class="radio">
                            <input type="radio" name="start-time" value="direct" checked />
                            <span>Direct starten</span>
                        </label>
                        <label class="radio">
                            <input type="radio" name="start-time" value="delayed" />
                            <span>Starten op:</span>
                        </label>
                        <label>
                            <input type="datetime-local" name="start-time-picker" value="" />
                        </label>
                    </div>
                    <div class="col col-4 align-right">
                        <button class="btn btn-primary" @@click="createBranch">Start aanmaken nieuwe branche</button>
                    </div>
                </footer>
            </div>
        </wiser-dialog>
        <wiser-dialog class="branches-dialog full-height" :modal="true" :width="'1200px'" :title="'Branch terugzetten'" ref="wiserMergeBranchPrompt" :visible="false" :actions="[{ text: 'Open merge conflict popup', primary: true, action: openMergeConflictsPrompt }]" @@open="onWiserMergeBranchPromptOpen">
            <div class="container">
                <div class="row" v-if="!branches || !branches.length">
                    <section class="full-error">
                        <ins class="icon-line-alert"></ins>
                        <span>U heeft nog geen andere omgevingen. Maak a.u.b. eerst een nieuwe omgeving aan via de optie "Nieuwe omgeving aanmaken".</span>
                    </section>
                </div>
                <div class="row scroll" v-else>
                    <div class="col col-12 form-row">
                        <label for="available-branches">Selecteer beschikbare branche</label>
                        <dropdownlist id="available-branches" class="full-width" :data-items="branches" :text-field="'name'" :data-item-key="'id'" v-model="selectedBranchValue"></dropdownlist>
                    </div>
                    
                    <div class="col col-12 form-row no-bottom-margin">
                        <label for="branche-datasync">Selecteer te synchroniseren Wiser data</label>
                    </div>
                    <div class="col col-12 table-row no-top-margin">
                        <div class="fixed-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Item</th>
                                        <th width="150">Alles</th>
                                        <th width="150">Nieuw</th>
                                        <th width="150">Verwijderd</th>
                                        <th width="150">Gewijzigd</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Alle onderstaande</td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" checked />
                                                <span>(100)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" checked />
                                                <span>(10)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" checked />
                                                <span>(5)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" checked />
                                                <span>(85)</span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Klant</td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Order</td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Factuur</td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Adres</td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Basket</td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Basketline</td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Orderregel</td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Product</td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Productfilter</td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Q</td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>R</td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    
                    <div class="col col-12 form-row no-bottom-margin">
                        <label for="branche-sync">Selecteer te synchroniseren Wiser inrichting</label>
                    </div>
                    <div class="col col-12 table-row no-top-margin">
                        <div class="fixed-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>Item</th>
                                        <th width="150">Alles</th>
                                        <th width="150">Nieuw</th>
                                        <th width="150">Verwijderd</th>
                                        <th width="150">Gewijzigd</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Alle onderstaande</td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" checked />
                                                <span>(100)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" checked />
                                                <span>(10)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" checked />
                                                <span>(5)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" checked />
                                                <span>(85)</span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Data selectors</td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Modules</td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Entiteiten</td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Eigenschappen van entiteiten</td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Query's</td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Rechten</td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Rollen</td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Veld templates</td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>API connection</td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Q</td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>R</td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label class="checkbox">
                                                <input type="checkbox" value="" />
                                                <span>(0)</span>
                                            </label>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="col col-12 form-row">
                        <label class="checkbox">
                            <input type="checkbox" />
                            <span>Verwijder deze branche na succesvol mergen</span>
                        </label>
                    </div>
                </div>
            </div>
            <footer class="container fixed no-bottom-padding">
                <div class="row">
                    <div class="col col-8 inline">
                        <label class="radio">
                            <input type="radio" name="start-time" value="direct" checked />
                            <span>Direct starten</span>
                        </label>
                        <label class="radio">
                            <input type="radio" name="start-time" value="delayed" />
                            <span>Starten op:</span>
                        </label>
                        <label>
                            <input type="datetime-local" name="start-time-picker" value="" />
                        </label>
                    </div>
                    <div class="col col-4 align-right">
                        <button class="btn btn-primary" @@click="mergeBranch">Start terugzet procedure</button>
                    </div>
                </div>
            </footer>
        </wiser-dialog>
        <wiser-dialog class="branches-dialog" :modal="true" :width="'1500px'" :title="'Conflicten'" ref="wiserMergeConflictsPrompt" :visible="false" :actions="[{ text: 'Annuleren' }, { text: 'Verwerken openstaande merges', primary: true, action: handleMergeConflicts }]">
        <div class="container stretch">
            <div class="row no-scroll">
                <div class="col col-12 flex-inline">
                    <select>
                        <option>Type</option>
                        <option>Veldnaam</option>
                        <option>Wijzigingsdatum</option>
                        <option>Waarde origineel</option>
                        <option>Waarde branche</option>
                    </select>

                    <select>
                        <option>bevat</option>
                        <option>is gelijk aan</option>
                        <option>is groter dan</option>
                        <option>is kleiner dan</option>
                        <option>is tussen</option>
                    </select>

                    <input type="text" name="" value="" />
                    <span>en</span>
                    <input type="text" name="" value="" />
                            
                    <button class="btn btn-primary">Keur goed</button>

                    <button class="btn btn-alert">Keur af</button>
                </div>
                
                <div class="col col-12 table-row no-top-margin">
                    <div class="fixed-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>Type</th>
                                    <th>Naam</th>
                                    <th>Veld</th>
                                    <th>Waarde origineel</th>
                                    <th>Waarde branche</th>
                                    <th>Origineel gewijzigd op</th>
                                    <th>Branche gewijzigd op</th>
                                    <th>Actie</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Klant</td>
                                    <td>Happy Geeks BV</td>
                                    <td>Telefoonnummer</td>
                                    <td>0412-611234</td>
                                    <td>+31 (412) 611234</td>
                                    <td>1 januari 2022 om 09.55<br>
                                        door Ferry</td>
                                    <td>1 januari 2022 om 09.55<br>
                                        door Gilian</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td>Klant</td>
                                    <td>Happy Geeks BV</td>
                                    <td>Telefoonnummer</td>
                                    <td>0412-611234</td>
                                    <td>+31 (412) 611234</td>
                                    <td>1 januari 2022 om 09.55<br>
                                        door Ferry</td>
                                    <td>1 januari 2022 om 09.55<br>
                                        door Gilian</td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td>Klant</td>
                                    <td>Happy Geeks BV</td>
                                    <td>Telefoonnummer</td>
                                    <td>0412-611234</td>
                                    <td>+31 (412) 611234</td>
                                    <td>1 januari 2022 om 09.55<br>
                                        door Ferry</td>
                                    <td>1 januari 2022 om 09.55<br>
                                        door Gilian</td>
                                    <td></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <footer class="row fixed no-bottom-padding">
                <div class="col col-6 inline">
                    <span class="error">
                        LET OP: nog niet alle conflicten hebben een akkoord of deny toegekend gekregen!
                    </span>
                </div>
                <div class="col col-6 align-right">
                    <span>10 van 100 conflicten akkoord</span>
                    <button class="btn btn-primary">Verwerken openstaande merges</button>
                </div>
            </footer>
        </div>
    </wiser-dialog>
        <wiser-dialog :modal="true" :width="'400px'" :title="'Vul een ID in'" ref="wiserIdPrompt" :visible="false" :actions="[{ text: 'Annuleren' }, { text: 'Openen', primary: true, action: openWiserItem }]" @@open="onWiserIdPromptOpen">
            <div class="form-row">
                <input type="number" id="wiserId" autocomplete="off" autofocus="autofocus" autocapitalize="none" v-model="wiserIdPromptValue" min="1" step="1" @@keypress="onWiserIdFieldKeyPress" required>
            </div>
        </wiser-dialog>
        <wiser-dialog :modal="true" :width="'400px'" :title="'Entiteit'" ref="wiserEntityTypePrompt" :visible="false" :actions="[{ text: 'Annuleren' }, { text: 'Openen', primary: true, action: openWiserItem }]">
            <p>Het opgegeven ID komt meerdere keren voor. Kies welk type u wilt openen:</p>
            <div class="form-row">
                <dropdownlist :data-items="listOfEntityTypes" :text-field="'display_name'" :data-item-key="'id'" v-model="wiserEntityTypePromptValue"></dropdownlist>
            </div>
        </wiser-dialog>
    </div>
</div>

<script type="text/html" id="login-template">
    <section>
        <form id="loginForm" class="login-screen" method="post" @@submit="login">
            <div class="logo"><img src="/img/logo-wiser-login.png" alt=""></div>
            <section class="full-error" v-if="message">
                <ins class="icon-line-alert"></ins>
                <span>{{ message }}</span>
            </section>
            <section class="full-error" v-if="!validSubDomain">
                <ins class="icon-line-alert"></ins>
                <span>U heeft een ongeldig subdomein gebruikt. Controleer a.u.b. het subdomein of neem contact op met ons.</span>
            </section>

            <div v-if="validSubDomain && loginStatus !== 'list' && loginStatus !== 'list_loading' && !showForgotPasswordScreen && !requirePasswordChange">
                <div class="form-row">
                    <input type="text" id="username" placeholder="Gebruikersnaam" autocomplete="off" autofocus="autofocus" autocapitalize="none" v-model="loginForm.username" required>
                </div>

                <div class="form-row">
                    <input type="password" id="password" placeholder="Wachtwoord" autocomplete="off" v-model="loginForm.password" @@keydown="checkCapslock($event)" required>
                    <ins id="password-toggle" class="icon-eye-visible" v-on:click="togglePassword()"></ins>

                    <div class="pwd-message" v-if="loginForm.capslock">Caps lock staat aan</div>
                </div>

                <div class="form-row">
                    <label id="remember" class="check-box">
                        <input type="checkbox" name="remember" class="no-form" v-model="loginForm.rememberMe"><span>Ingelogd blijven</span>
                    </label>
                </div>

                <div class="btn-row">
                    <button type="submit" :class="{ btn: true, 'btn-primary': true, loading: loginStatus === 'loading' }">Inloggen</button>

                    <a href="#" v-on:click="togglePasswordForgottenScreen(true)" id="forgotten-password">Wachtwoord vergeten?</a>
                </div>
            </div>
            <div v-if="loginStatus === 'list' || loginStatus === 'list_loading' && !showForgotPasswordScreen">
                <p>Kies de gebruiker waarmee u wilt inloggen</p>

                <div class="form-row"> 
                    <combobox :data-items="listOfUsers" :text-field="'Title'" :data-item-key="'username'" v-model="loginForm.selectedUser" :filterable="true" @@filterchange="userFilterChange"></combobox>
                </div>

                <div class="btn-row">
                    <a href="#" class="btn btn-secundary" @@click="logout()">Annuleren</a>
                    <button type="submit" :class="{ btn: true, 'btn-primary': true, loading: loginStatus === 'list_loading' }">Verder</button>
                </div>
            </div>
            <div v-if="showForgotPasswordScreen" class="forgotPasswordScreen">
                <section class="success" v-if="resetPassword">
                    <span>Een email is verstuurd met uw nieuwe wachtwoord.</span>
                </section>
                <div class="form-row">
                    <input type="text" class="loginField usernameField" placeholder="Gebruikersnaam" v-model="forgotPasswordForm.username" />
                </div>
                <div class="form-row">
                    <input type="text" class="loginField passwordField" placeholder="E-mailadres" v-model="forgotPasswordForm.email" />
                </div>

                <div class="btn-row">
                    <button type="submit" :class="{ btn: true, 'btn-primary': true }">Verzenden</button>
                    <div :class="{ btn: true }" v-on:click="togglePasswordForgottenScreen(false)">Annuleren</div>
                </div>
            </div>
            <div class="changePasswordAfterLogin" v-if="requirePasswordChange">
                <h3>U moet een nieuw wachtwoord kiezen, vul dit a.u.b. hier in</h3>
                <div class="form-row">
                    <input type="password" id="newPassword" name="newPassword" class="loginField passwordField" placeholder="Uw nieuwe wachtwoord" v-model="changePasswordForm.newPassword" />
                </div>
                <div class="form-row">
                    <input type="password" id="newPasswordRepeat" name="newPasswordRepeat" class="loginField passwordField" placeholder="Nogmaals uw nieuwe wachtwoord" v-model="changePasswordForm.newPasswordRepeat" />
                </div>

                <div class="error"></div>

                <div class="btn-row">
                    <button id="submitPasswordChange" type="submit" :class="{ btn: true, 'btn-primary': true }">Wijzigen</button>
                    <button id="cancelPasswordChange" :class="{ btn: true }">Annuleren</button>
                </div>
            </div>
        </form>
    </section>
</script>

<script type="text/html" id="customer-management-template">
    <div :class="{ loading: loading, 'form-inline': true, 'new-customer-form': true }">
        <h1>Nieuwe Wiser account toevoegen...</h1>
        <p class="success" v-if="currentStep === 'end'">
            De klant is successvol aangemaakt en heeft als ID '<em>{{ createCustomerResult.data.id }}</em>' gekregen.<br />
            De URL voor Wiser Live is geworden: <a :href="'https://' + newCustomerData.subDomain + '.wiser3.nl/'" target="_blank">{{newCustomerData.subDomain}}.wiser3.nl</a>. (Deze werkt pas nadat er een DNS-record is toegevoegd voor dit subdomein.)<br />
            De URL voor Wiser dev is geworden: <a :href="'http://' + newCustomerData.subDomain + '.wiser3.juicedev.nl/'" target="_blank">{{newCustomerData.subDomain}}.wiser3.juicedev.nl</a>. (Deze kan al direct gebruikt worden.)
        </p>
        <p v-if="newCustomerData.createNewDatabase">Verder zijn nog de volgende databasegebruikers aangemaakt:</p>
        <p v-else>Je hebt de volgende databasegebruiker ingevuld:</p>
        <ul class="success" v-if="currentStep === 'end'">
            <li v-for="user in createCustomerResult.databaseUsers" :key="user.name">
                <strong>{{ user.name }}:</strong> {{ user.password }}
            </li>
        </ul>
        <p class="success" v-if="currentStep === 'end'"><a href="#" class="btn btn-secundary" @@click="reset">Nog een klant aanmaken</a></p>
        <form method="post" v-if="currentStep !== 'end'">
            <section class="step" v-if="currentStep === 1">
                <div class="form-row">
                    <label for="newCustomerName">Wat is de gewenste bedrijfsnaam en/of accountnaam?</label>
                    <input type="text" id="newCustomerName" autocomplete="off" autofocus="autofocus" autocapitalize="none" v-model="newCustomerData.name" required :class="{ error: errors.indexOf('NameNotAvailable') > -1, small: true }" placeholder="Happy Geeks B.V.">
                    <p class="hint">De volledige bedrijfsnaam van de klant. Bijvoorbeeld 'Happy Geeks B.V.'. Alleen wij zien deze naam terug, de klant ziet deze naam nergens.</p>
                </div>
                <div class="form-row error-row" v-if="errors.indexOf('NameNotAvailable') > -1">
                    <ins class="icon-line-alert"></ins>
                    <span>Er bestaat al een klant met deze naam. Kies a.u.b. een andere naam.</span>
                </div>

                <div class="form-row">
                    <label for="subDomain">Wat is het subdomein dat gebruikt moet worden voor Wiser 2?</label>
                    <input type="text" id="subDomain" autocomplete="off" autofocus="autofocus" autocapitalize="none" v-model="newCustomerData.subDomain" required :class="{ error: errors.indexOf('SubDomainNotAvailable') > -1, small: true }" placeholder="happygeeks"><span class="hint">.wiser.nl</span>
                    <p class="hint">Alleen het subdomein, met kleine letters, bijvoorbeeld 'happygeeks'. Dit is verplicht voor Wiser 2 klanten, die moeten kunnen inloggen via een subdomein, zoals 'happygeeks.wiser.nl'.</p>
                </div>
                <div class="form-row error-row" v-if="errors.indexOf('SubDomainNotAvailable') > -1">
                    <ins class="icon-line-alert"></ins>
                    <span>Er bestaat al een klant met dit subdomein. Kies a.u.b. een ander subdomein.</span>
                </div>
                <div class="form-row">
                    <label>
                        <input type="checkbox" name="isWebShop" v-model="newCustomerData.isWebShop" />
                        Is webshop
                    </label>
                    <p class="hint">Zet dit vinkje aan indien de klant ook een webshop krijgt. Dan worden extra entiteiten toegevoegd voor bijvoorbeeld verzendmethodes, btw-regels etc.</p>
                </div>
                <div class="form-row">
                    <label>
                        <input type="checkbox" name="isConfigurator" v-model="newCustomerData.isConfigurator" />
                        Is configurator
                    </label>
                    <p class="hint">Zet dit vinkje aan indien de klant ook een configurator krijgt. Dan worden extra entiteiten toegevoegd voor bijvoorbeeld configuration en configurationlines.</p>
                </div>
            </section>

            <section class="step" v-if="currentStep === 2">
                <fieldset>
                    <legend>Domein</legend>

                    <div class="form-row">
                        <label for="siteName">Naam van website</label>
                        <input type="text" id="siteName" autocomplete="off" autofocus="autofocus" autocapitalize="none" v-model="newCustomerData.siteName" placeholder="Happy Geeks">
                        <p class="hint">De naam van de website, deze wordt op elke pagina achteraan de titel toegevoegd. Voorbeeld: Contact - Happy Geeks</p>
                    </div>

                    <div class="form-row">
                        <label for="hostDev">Domein dev</label>
                        <input type="text" id="hostDev" autocomplete="off" autofocus="autofocus" autocapitalize="none" v-model="newCustomerData.hostDev" placeholder="happygeeks.nl.juicedev.nl">
                        <p class="hint">
                            Het domein wat straks voor de test gebruikt zal worden. Indien je die nu niet invult, moet je die later in de instellingenmodule bij de klant invullen.<br />
                            <strong>In dit geval moet er géén http(s) toegevoegd worden en ook geen slash o.i.d. aan het einde. Alleen het hoofddomein van de klant.</strong>
                        </p>
                    </div>

                    <div class="form-row">
                        <label for="hostTest">Domein test</label>
                        <input type="text" id="hostTest" autocomplete="off" autofocus="autofocus" autocapitalize="none" v-model="newCustomerData.hostTest" placeholder="klant.happygeeks.dev">
                        <p class="hint">
                            Het domein wat straks voor de test gebruikt zal worden. Indien je die nu niet invult, moet je die later in de instellingenmodule bij de klant invullen.<br />
                            <strong>In dit geval moet er géén http(s) toegevoegd worden en ook geen slash o.i.d. aan het einde. Alleen het hoofddomein van de klant.</strong>
                        </p>
                    </div>

                    <div class="form-row">
                        <label for="hostLive">Domein live</label>
                        <input type="text" id="hostLive" autocomplete="off" autofocus="autofocus" autocapitalize="none" v-model="newCustomerData.hostLive" placeholder="happygeeks.nl">
                        <p class="hint">
                            Het domein wat straks voor de live gebruikt zal worden. Indien je die nu niet invult, moet je die later in de instellingenmodule bij de klant invullen.<br />
                            <strong>In dit geval moet er géén http(s) toegevoegd worden en ook geen slash o.i.d. aan het einde. Alleen het hoofddomein van de klant.</strong>
                        </p>
                    </div>
                </fieldset>

                <fieldset>
                    <legend>Database</legend>

                    <div class="form-row">
                        <label>
                            <input type="checkbox" name="newDatabase" v-model="newCustomerData.createNewDatabase" />
                            Nieuw databaseschema maken
                        </label>
                    </div>

                    <div class="form-row" v-if="newCustomerData.createNewDatabase">
                        <label for="digitalOceanApiAccessToken">Digital Ocean access token</label>
                        <input type="text" id="digitalOceanApiAccessToken" autocomplete="off" autofocus="autofocus" autocapitalize="none" v-model="newCustomerData.digitalOceanApiAccessToken" required>
                        <p class="hint">
                            <a href="@(Model.Settings.ApiBaseUrl)api/v3/digital-ocean/authorize" target="_blank">Open eerst deze pagina</a> en geef toestemming op die pagina.
                            Vervolgens krijg je wat JSON te zien. Kopieer hieruit de waarde van "access_token" en plak die in dit veld.<br />
                            Klik daarna op de knop "Haal clusters op" hieronder en selecteer daarna het cluster waar de klant aan toegevoegd moet worden.
                        </p>
                    </div>

                    <ul v-if="newCustomerData.createNewDatabase && availableDbClusters.length > 0">
                        <li v-for="item in availableDbClusters" :key="item.id">
                            <label :for="'db-'+ item.id">
                                <input type="radio" :id="'db-'+ item.id" name="dbClusterChoice" v-model="newCustomerData.dbClusterChoice" :value="item.id" />
                                {{item.name}}
                            </label>
                        </li>
                    </ul>
                    <div class="btn-row" v-else-if="newCustomerData.createNewDatabase">
                        <button type="button" class="btn btn-primary" @@click="getDbClusters">Haal clusters op</button>
                    </div>

                    <div class="form-row" v-if="!newCustomerData.createNewDatabase">
                        <label for="databaseHost">Host <strong>*</strong></label>
                        <input type="text" id="databaseHost" autocomplete="off" autofocus="autofocus" autocapitalize="none" v-model="newCustomerData.databaseHost" required>
                    </div>

                    <div class="form-row">
                        <label for="databaseUsername">Loginnaam <strong>*</strong></label>
                        <input type="text" id="databaseUsername" autocomplete="off" autofocus="autofocus" autocapitalize="none" v-model="newCustomerData.databaseUsername" required>
                        <p class="hint" v-if="newCustomerData.createNewDatabase">Vul een naam in voor een databagebruiker die nog niet bestaat.</p>
                        <p class="hint" v-else>Vul een naam in van een bestaande databasegebruiker.</p>
                    </div>

                    <div class="form-row" v-if="!newCustomerData.createNewDatabase">
                        <label for="databasePassword">Wachtwoord <strong>*</strong></label>
                        <input type="text" id="databasePassword" autocomplete="off" autofocus="autofocus" autocapitalize="none" v-model="newCustomerData.databasePassword" required>
                    </div>

                    <div class="form-row">
                        <label for="databaseSchema">Schemanaam <strong>*</strong></label>
                        <input type="text" id="databaseSchema" autocomplete="off" autofocus="autofocus" autocapitalize="none" v-model="newCustomerData.databaseSchema" required>
                        <p class="hint" v-if="newCustomerData.createNewDatabase">Vul een naam in voor een databaseschema die nog niet bestaat.</p>
                        <p class="hint" v-else>Vul een naam in van een bestaand databaseschema.</p>
                    </div>
                    <div class="form-row" v-if="!newCustomerData.createNewDatabase">
                        <label for="databasePort">Poortnummer <strong>*</strong></label>
                        <input type="number" id="databasePort" autocomplete="off" autofocus="autofocus" autocapitalize="none" v-model="newCustomerData.databasePort" required min="1" step="1">
                    </div>
                </fieldset>
            </section>

            <div class="form-row error-row" v-if="message">
                <ins class="icon-line-alert"></ins>
                <span>{{ message }}</span>
            </div>

            <div class="btn-row">
                <a href="#" class="btn btn-secundary" v-if="currentStep > 1" @@click="previousStep">Terug</a>
                <button type="submit" class="btn btn-primary" @@click="nextStep">{{ nextButtonText }}</button>
            </div>
        </form>
    </div>
</script>

<script id="vue-config" type="application/json">
{
    "apiBase": "@Model.Settings.ApiBaseUrl",
    "subDomain": "@Model.SubDomain" ,
    "isTestEnvironment": @Model.IsTestEnvironment.ToString().ToLowerInvariant(),
    "wiser1BaseUrl": "@Model.Wiser1BaseUrl",
    "loadPartnerStyle": @Model.LoadPartnerStyle.ToString().ToLowerInvariant(),
    "apiClientId": "@Model.Settings.ApiClientId",
    "apiClientSecret": "@Model.Settings.ApiClientSecret",
    "trackJsToken": "@Model.Settings.TrackJsToken",
    "markerIoToken": "@Model.Settings.MarkerIoToken"
}
</script>

<script type="module" src="/scripts/main.min.js"></script>
